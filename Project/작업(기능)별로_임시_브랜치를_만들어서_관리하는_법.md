# **🚀 Git 협업 가이드– CI 세팅 실습 예시**

우리는 기능/작업 단위로 **브랜치를 따서 → 작업 → PR 생성 → 리뷰 → 머지**하는 방식으로 협업합니다.
 브랜치 전략은 다음과 같습니다:

- `master` → 최종 배포용 (CI, CD)
- `dev` → 개발 통합용 (CI)
- `feat/*` → 기능별/개인별 작업용

------

## 0) 로컬 dev 최신화

- 협업 전에 항상 **내 로컬 dev 브랜치를 원격 최신 상태로 맞추는 것**이 중요합니다.

```bash
git fetch origin          # 원격 저장소(origin)의 최신 내역 가져오기
git checkout dev          # dev 브랜치로 이동
git pull --ff-only origin dev  # 원격 dev를 내 dev와 맞추기
```

`--ff-only`는 dev에 내가 직접 커밋한 게 없을 때만 안전하게 병합해줍니다.
 만약 충돌이 나면 팀에 공유하고 dev에 직접 커밋하지 말아야 합니다.

------

## 1) 작업 브랜치 생성

-  새로운 기능이나 작업은 무조건 **feat 브랜치**에서 시작합니다.

- (예) ci-ruff-auto-fix라는 작업을 수행한다고 합시다. 해당 작업명을 가진 브랜치를 feat브랜치에 생성할게요.

```bash
git switch -c feat/ci-ruff-auto-fix

# switch -c: 새로운 브랜치를 만들고 동시에 이동
# feat/…: 기능 브랜치에 해당 작업명을 가진 하위 브랜치 생성
```

------

## 2) 해당 브랜치에서 작업 진행

- 이 브랜치 안에서는 개인별로 자유롭게 작업하세요

  - 파일 수정, 추가, 삭제 전부 이 브랜치에서만!

  - dev나 master에는 절대 직접 커밋하지 않습니다.

------

## 3)  끝나면 작업 내용 신경써서 커밋 (커밋 컨벤션 따르기!!)

- 수정한 파일을 커밋합니다.

```bash
git add .github/workflows/ci.yml # 변경한 파일만 add하기
git commit -m "ci: Ruff 자동수정 워크플로우 추가" \
  -m "- PR 시 Ruff lint 및 format 자동 실행
- 위반 사항 자동 수정 후 PR 브랜치에 커밋/푸시
- ESLint(프론트엔드), Docker 빌드 확인 작업 포함"
```

- **Conventional Commit 규칙**에 맞게 `타입: 내용` 형식으로 작성
  - `ci:` → CI/CD 관련 변경

- 첫 줄은 요약, 두 번째부터는 상세 설명

------

## 4) 원격 브랜치 푸시

- 내 로컬 feat 브랜치를 원격 GitHub에 업로드할게요.

```BASH
git push -u origin feat/ci-ruff-auto-fix
```

- `-u`: 이 브랜치가 origin의 같은 이름 브랜치를 “추적”하도록 연결
  - 이후부터는 `git push`, `git pull`만 입력해도 됨

------

## 5) GitHub에서 Pull Request(PR) 생성

- 푸시 후 GitHub에서 “Compare & pull request” 버튼을 눌러 PR을 만듭니다.

- base: `dev`

- compare: `feat/ci-ruff-auto-fix`

- 제목/본문: 커밋 메시지와 동일하게 작성

- “Allow edits by maintainers” 체크 → 팀장이 필요 시 수정 가능

  

- PR은 “내 작업 브랜치를 dev에 합치자”라는 요청입니다

-  master에는 바로 PR을 날리지 않을게요

------

## 6)  CI 실행 확인

-  PR이 열리면 GitHub Actions가 자동으로 돌아갑니다.
  - 여러분의 코드가 잘 써졌는지, yml 파일 및 github actions 을 통해 자동으로 검사합니다.
- `ci/ruff-auto-fix` 실행 → 자동수정 → 봇 커밋 푸시 의 작업 흐름이에요.
- 두 번째 실행부터는 “No changes to commit” 메시지와 함께 통과될 겁니다.

------

## 7) 코드 리뷰 & 머지

-  팀원 한 명 이상이 승인하면 머지됩니다.
- **Squash and merge** 권장 (대표 커밋 하나로 합쳐 해당 커밋만 보이게끔 dev에 머지)
- 머지 후 `feat/ci-ruff-auto-fix` 브랜치는 삭제 (선택, 로컬에는 백업해두는 것을 권장합니다)

------



## 📝 추가로 기억할 만한 자주 쓰는 명령어

### 파일 수정 확인

```bash
git status
```

### 커밋

```bash
git add <파일명>
git commit -m "타입: 설명" -m "상세 설명"
```

### 푸시

```bash
git push -u origin feat/ci-ruff-auto-fix
```

### PR 생성

- base: `dev`, compare: `feat/ci-ruff-auto-fix`

### CI 확인

- Actions 탭에서 `ci/ruff-auto-fix`, `ci/lint-frontend`, `ci/docker-build` 로그 확인

------



### 요약

 `git add` 

→ `git commit` 

→ `git push -u origin feat/ci-ruff-auto-fix` 

→ GitHub에서 PR 열기 

→ CI 확인 

→ 코드 리뷰 

→ Squash and merge 

→ 브랜치 삭제